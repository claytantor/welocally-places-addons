function WELOCALLY_GeoDbSearch(a){this.cfg;this.jqxhr;this.observers;this.init=function(){var b;if(!a){b="Please provide configuration for the widget";a={}}if(!a.endpoint){a.endpoint="https://api.welocally.com"}if(!a.requestPath){a.requestPath="/geodb/place/1_0/search.json"}if(!a.zoom){a.zoom=16}if(!a.location){a.location=new google.maps.LatLng(38.548165,-96.064453)}if(!a.showShare){a.showShare=false}if(!a.siteKey||!a.siteToken){b="Please include your site key and token in the configuration to add a places."}this.cfg=a;return this}}WELOCALLY_GeoDbSearch.prototype.search=function(){var a=this;var b={q:a.cfg.q,loc:a.cfg.loc[0]+"_"+a.cfg.loc[1],radiusKm:a.cfg.radiusKm};var c=a.cfg.endpoint+a.cfg.requestPath+"?"+WELOCALLY.util.serialize(b)+"&callback=?";jQuery.each(a.cfg.observers,function(e,d){d.setStatus(d.getStatusArea(),"Finding places","wl_update",true)});jQuery.ajax({url:c,dataType:"json",success:function(d){if(d!=null&&d.errors!=null){jQuery.each(a.cfg.observers,function(f,e){e.setStatus(e.getStatusArea(),"ERROR:"+WELOCALLY.util.getErrorString(d.errors),"wl_error",false)})}else{if(d!=null&&d.length>0){jQuery.each(a.cfg.observers,function(f,e){e.setStatus(e.getStatusArea(),"","wl_message",false);e.setPlaces(d)})}else{jQuery.each(a.cfg.observers,function(f,e){e.setStatus(e.getStatusArea(),"No results were found matching your search.","wl_warning",false)})}}}});return false};